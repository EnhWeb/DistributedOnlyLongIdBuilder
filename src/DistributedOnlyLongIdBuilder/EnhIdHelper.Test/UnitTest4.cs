using System;
using System.Text.RegularExpressions;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace EnhIdHelper.Test
{
    [TestClass]
    public class UnitTest4
    {
        [TestMethod]
        public void TestMethod1()
        {
            for (int i = 0; i < 1000; i++)
            {
                string strObj = "{\"data\":{\"Task\":{\"ID\":62625511786975238,\"CreateuserID\":\"848370708680540160\",\"TasktypeID\":2,\"TopictypetopID\":14405,\"SchoolID\":\"\",\"Tieno\":0,\"Classids\":\"\",\"State\":2,\"Isexam\":true,\"Isreadonly\":false,\"Taskname\":\"考试\",\"Starttime\":\"\\/Date(1527732900000)\\/\",\"Endtime\":\"\\/Date(1527821100000)\\/\",\"Timespan\":30.00,\"Quecount\":14,\"Isenabled\":true,\"Isdeleted\":false,\"Createtime\":\"\\/Date(1527732759000)\\/\",\"Createusername\":\"程序0008\",\"Updatetime\":\"\\/Date(1527732759000)\\/\",\"Updateusername\":\"程序0008\",\"Tasktarget\":null},\"TaskOwner\":{\"ID\":30597,\"TaskID\":62625511786975238,\"UserID\":\"978211035620048905\",\"Statisticalstate\":1,\"Isstarted\":false,\"Isended\":false,\"Startedtime\":\"\\/Date(-62135596800000)\\/\",\"Submitendtime\":\"\\/Date(-62135596800000)\\/\",\"Timespan\":0,\"Taskscore\":0,\"Usercompletioncount\":0,\"Usercorrectcount\":0,\"Classno\":117},\"TaskOwnerDetail\":{\"ID\":357559,\"TaskID\":62625511786975238,\"UserID\":\"978211035620048905\",\"QueID\":30621,\"UseranswerstateID\":2,\"Subtaskscore\":0,\"Iscorrect\":false,\"Isfirstenter\":false,\"Starttime\":\"\\/Date(1527738351000)\\/\",\"Firstsubmittime\":\"\\/Date(-62135596800000)\\/\",\"Lastsubmittime\":\"\\/Date(-62135596800000)\\/\"},\"TopicQuestion\":{\"ID\":30621,\"NodeID\":14418,\"ModelID\":408,\"DifficultylevelID\":1,\"Score\":4.0000,\"Title\":\"产品是否进一步加工的决策\",\"Tips\":null,\"Piccontent\":null,\"Content\":\"\\u003cp\\u003e公司2016年生产三层瓦楞纸板400000平方米，单位变动成本为4.2元，该产品可直接对外出售，单位售价每平方米为8.8元。企业也可以利用剩余生产能力将三层瓦楞纸板加工成纸箱出售。但需要追加加工费用250000元。在进一步加工的过程中，每2平方米可以加工一个纸箱，每加工100平方米要损耗2.5平方米，纸箱的单位售价为20元。根据上述资料，试比较该企业是出售三层瓦楞纸板还是将其进一步加工成纸箱出售有利？\\u003c/p\\u003e\",\"Sortrank\":50,\"Answeranalysis\":\"\\u003cp\\u003e无\\u003c/p\\u003e\",\"Isenabled\":true,\"Createtime\":\"\\/Date(1527503769000)\\/\",\"Createusername\":\"3396139087\",\"Updatetime\":\"\\/Date(-62135596800000)\\/\",\"Updateusername\":null,\"Isdeleted\":false},\"TopicAddon\":{\"ID\":191,\"QueID\":30621,\"Subtopiccount\":5,\"Topicdesignhtml\":\"\\u003cimg class=\\\"img_style \\\" onerror=\\\"\\\" src=\\\"http://cdn-resource-static.cost88.com/UploadFiles/Images/b0cc229c-c514-4d2c-816e-a5d91124b64e.png\\\" ondragstart=\\\"return false;\\\"\\u003e\\u003cdiv class=\\\"creat_panel  ui-draggable ui-draggable-handle ui-resizable\\\" style=\\\"width: 112px; top: 58px; left: 421px; height: 45px;\\\"\\u003e\\u003cspan class=\\\"tabindex\\\" style=\\\"display: block;\\\"\\u003e1\\u003c/span\\u003e\\u003cinput type=\\\"text\\\" tabindex=\\\"1\\\" class=\\\"\\\" style=\\\"top: 58px; left: 421px; text-align: center; border: none;\\\" data-value=\\\"380000\\\" data-score=\\\"1\\\" title=\\\"1分\\\"\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-e\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-s\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"creat_panel  ui-draggable ui-draggable-handle ui-resizable\\\" style=\\\"width: 113px; top: 104px; left: 420px; height: 47px;\\\"\\u003e\\u003cspan class=\\\"tabindex\\\" style=\\\"display: block;\\\"\\u003e2\\u003c/span\\u003e\\u003cinput type=\\\"text\\\" tabindex=\\\"2\\\" class=\\\"\\\" style=\\\"top: 104px; left: 420px; text-align: center; border: none;\\\" data-value=\\\"250000\\\" data-score=\\\"1\\\" title=\\\"1分\\\"\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-e\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-s\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"creat_panel  ui-draggable ui-draggable-handle ui-resizable\\\" style=\\\"width: 113px; top: 149px; left: 421px; height: 46px;\\\"\\u003e\\u003cspan class=\\\"tabindex\\\" style=\\\"display: block;\\\"\\u003e3\\u003c/span\\u003e\\u003cinput type=\\\"text\\\" tabindex=\\\"3\\\" class=\\\"\\\" style=\\\"top: 149px; left: 421px; text-align: center; border: none;\\\" data-value=\\\"130000\\\" data-score=\\\"1\\\" title=\\\"1分\\\"\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-e\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-s\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"creat_panel  ui-draggable ui-draggable-handle ui-resizable\\\" style=\\\"width: 30px; top: 197px; left: 428px; height: 17px;\\\"\\u003e\\u003cspan class=\\\"tabindex\\\" style=\\\"display: block;\\\"\\u003e4\\u003c/span\\u003e\\u003cinput type=\\\"checkbox\\\" tabindex=\\\"4\\\" class=\\\"box_shadow\\\" style=\\\"top: 197px; left: 428px; border: none;\\\" data-checked=\\\"true\\\" checked=\\\"checked\\\" data-score=\\\"1\\\" title=\\\"1分\\\"\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-e\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-s\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"creat_panel  ui-draggable ui-draggable-handle ui-resizable\\\" style=\\\"width: 30px; top: 197px; left: 509px; height: 17px;\\\"\\u003e\\u003cspan class=\\\"tabindex\\\" style=\\\"display: block;\\\"\\u003e5\\u003c/span\\u003e\\u003cinput type=\\\"checkbox\\\" tabindex=\\\"5\\\" class=\\\"\\\" style=\\\"top: 197px; left: 509px; border: none;\\\" data-checked=\\\"false\\\"\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-e\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-s\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003c/div\\u003e\",\"Topicdisplayhtml\":\"\\u003cimg class=\\\"img_style \\\" onerror=\\\"\\\" src=\\\"http://cdn-resource-static.cost88.com/UploadFiles/Images/b0cc229c-c514-4d2c-816e-a5d91124b64e.png\\\" ondragstart=\\\"return false;\\\"\\u003e\\u003cdiv class=\\\"creat_panel  ui-draggable ui-draggable-handle ui-resizable\\\" style=\\\"width: 112px; top: 58px; left: 421px; height: 45px;\\\"\\u003e\\u003cspan class=\\\"tabindex\\\" style=\\\"display: none;\\\"\\u003e1\\u003c/span\\u003e\\u003cinput type=\\\"text\\\" tabindex=\\\"1\\\" class=\\\"\\\" style=\\\"top: 58px; left: 421px; text-align: center; border: none;\\\" data-value=\\\"380000\\\" data-score=\\\"1\\\" title=\\\"1分\\\"\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-e\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-s\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"creat_panel  ui-draggable ui-draggable-handle ui-resizable\\\" style=\\\"width: 113px; top: 104px; left: 420px; height: 47px;\\\"\\u003e\\u003cspan class=\\\"tabindex\\\" style=\\\"display: none;\\\"\\u003e2\\u003c/span\\u003e\\u003cinput type=\\\"text\\\" tabindex=\\\"2\\\" class=\\\"\\\" style=\\\"top: 104px; left: 420px; text-align: center; border: none;\\\" data-value=\\\"250000\\\" data-score=\\\"1\\\" title=\\\"1分\\\"\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-e\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-s\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"creat_panel  ui-draggable ui-draggable-handle ui-resizable\\\" style=\\\"width: 113px; top: 149px; left: 421px; height: 46px;\\\"\\u003e\\u003cspan class=\\\"tabindex\\\" style=\\\"display: none;\\\"\\u003e3\\u003c/span\\u003e\\u003cinput type=\\\"text\\\" tabindex=\\\"3\\\" class=\\\"\\\" style=\\\"top: 149px; left: 421px; text-align: center; border: none;\\\" data-value=\\\"130000\\\" data-score=\\\"1\\\" title=\\\"1分\\\"\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-e\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-s\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"creat_panel  ui-draggable ui-draggable-handle ui-resizable\\\" style=\\\"width: 30px; top: 197px; left: 428px; height: 17px;\\\"\\u003e\\u003cspan class=\\\"tabindex\\\" style=\\\"display: none;\\\"\\u003e4\\u003c/span\\u003e\\u003cinput type=\\\"checkbox\\\" tabindex=\\\"4\\\" class=\\\"box_shadow\\\" style=\\\"top: 197px; left: 428px; border: none;\\\" data-checked=\\\"true\\\" checked=\\\"checked\\\" data-score=\\\"1\\\" title=\\\"1分\\\"\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-e\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-s\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"creat_panel  ui-draggable ui-draggable-handle ui-resizable\\\" style=\\\"width: 30px; top: 197px; left: 509px; height: 17px;\\\"\\u003e\\u003cspan class=\\\"tabindex\\\" style=\\\"display: none;\\\"\\u003e5\\u003c/span\\u003e\\u003cinput type=\\\"checkbox\\\" tabindex=\\\"5\\\" class=\\\"\\\" style=\\\"top: 197px; left: 509px; border: none;\\\" data-checked=\\\"false\\\"\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-e\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-s\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003cdiv class=\\\"ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se\\\" style=\\\"z-index: 90;\\\"\\u003e\\u003c/div\\u003e\\u003c/div\\u003e\",\"Correctanswerhtml\":\"[\\\"380000\\\",\\\"250000\\\",\\\"130000\\\",true,false,{\\\"startX\\\":[],\\\"startY\\\":[],\\\"endX\\\":[],\\\"endY\\\":[]}]\",\"Createtime\":\"\\/Date(1527504260000)\\/\",\"Updatetime\":\"\\/Date(1527733234000)\\/\",\"Updateusername\":\"3396139087\"},\"UserAnswer\":{\"ID\":1400,\"TaskID\":62625511786975238,\"UserID\":\"978211035620048905\",\"QueID\":30621,\"Useraswer\":\"\",\"Subtopiccorrectcount\":0,\"Subtopicerrorcount\":0,\"Firstuseranswer\":\"\",\"Firstsubtopiccorrectcount\":0,\"Firstsubtopicerrorcount\":0,\"Firstsubmittime\":\"\\/Date(-62135596800000)\\/\",\"Createtime\":\"\\/Date(1527738351000)\\/\",\"Updatecount\":0,\"Updatetime\":\"\\/Date(1527738351000)\\/\"},\"IsExam\":true,\"TopicModel\":{\"ID\":408,\"Name\":\"案例j题v3\",\"Sortrank\":50,\"Viewpatch\":\"QueDetial\\\\408\",\"Topicrecordaddontablename\":\"1\",\"Topicstandardanswertablename\":\"1\",\"Topicuseranswertablename\":\"1\",\"Insertdatetime\":\"\\/Date(1522726287000)\\/\",\"Isenabled\":true,\"Isdeleted\":false},\"TopicOptionModels\":null,\"TopicOptionDetails\":null},\"result\":true,\"msg\":\"查询数据成功！\",\"data_count\":5,\"callback\":\"\"}";
                if (i == 0)
                    Console.WriteLine($"\r\n\r\n转换前：{strObj}\r\n\r\n");

                strObj = Regex.Replace(strObj, @"\\/Date\(([-]{0,1}\d+)\)\\/", match =>
                {
                    DateTime dt = new DateTime(1970, 1, 1);
                    dt = dt.AddMilliseconds(long.Parse(match.Groups[1].Value));
                    dt = dt.ToLocalTime();
                    return dt.ToString("yyyy-MM-dd HH:mm:ss");
                });
                strObj = Regex.Replace(strObj, "\":(\\d{17,25}),\"", match =>
                {
                    string longStr = $"\":\"{long.Parse(match.Groups[1].Value.Replace("\"", "").Replace(":", "").Replace(",", ""))}\",\"";
                    return longStr;
                });
                if (i == 0)
                    Console.WriteLine($"\r\n\r\n转换后：{strObj}\r\n\r\n");
            }
        }
    }
}